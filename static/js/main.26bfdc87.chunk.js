(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{68:function(e,t,a){e.exports=a(86)},73:function(e,t,a){},74:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),i=(a(73),a(62)),o=a(25),s=a(11),m=(a(74),a(39)),u=a.n(m),p=a(49),d=a(50),f=a.n(d),E=(a(76),f.a.initializeApp({apiKey:"IzaSyBAho_QP2ZhE_QrkIUfFPQjMhYr0hZ1wM8",authDomain:"shop-3e8e4.firebaseapp.com",databaseURL:"https://shop-3e8e4.firebaseio.com",projectId:"shop-3e8e4",storageBucket:"shop-3e8e4.appspot.com",messagingSenderId:"794284308515",appId:"1:794284308515:web:22ee6efc9ec9e2ec419996"}));function h(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(null),i=Object(s.a)(l,2),o=i[0],m=i[1],d=Object(n.useState)(!0),f=Object(s.a)(d,2),h=f[0],g=f[1];return Object(n.useEffect)((function(){function t(){return(t=Object(p.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.firestore().collection(e).get().then((function(e){return e.docs.map((function(e){return e.data()}))}));case 3:a=t.sent,c(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),m(t.t0);case 10:return t.prev=10,g(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),{data:r,error:o,loading:h}}var g=a(104),b=a(108),v=a(4),_=a(88);var N=function(e){return r.a.createElement(_.a,{variant:"h2",className:"title"},e.title)},k=a(10);var y=function(){var e=Object(v.f)().category,t=h(e),a=t.data,c=t.error,l=t.loading,i=Object(n.useState)(null),o=Object(s.a)(i,2),m=o[0],u=o[1],p=m?a.filter((function(e){return e.sizes.find((function(e){return e.size===parseInt(m)}))})):a;if(c)throw c;return l?r.a.createElement(b.a,null):0===a.length?r.a.createElement(N,{title:"Products not found"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"products"},r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:12,md:2,className:"products__filters"},r.a.createElement("aside",null,r.a.createElement("label",{htmlFor:"size"},"Fitler by size"),r.a.createElement("select",{id:"size",className:"products__filtr",value:m||"",onChange:function(e){return u(e.target.value)}},r.a.createElement("option",{value:"",defaultValue:!0},"All sizes"),r.a.createElement("option",{value:"36"},"36"),r.a.createElement("option",{value:"38"},"38")))),r.a.createElement(g.a,{item:!0,xs:12,md:10},r.a.createElement(g.a,{container:!0},p.map((function(t){return r.a.createElement(g.a,{item:!0,xs:12,sm:6,md:4,key:t.id,className:"product__single"},r.a.createElement("div",null,r.a.createElement("img",{className:"product__single--img",src:t.img,alt:t.img}),r.a.createElement("p",{className:"product__single--info"},r.a.createElement("span",{className:"product__single--name"},t.name),r.a.createElement("span",{className:"product__single--price"},t.price," \u20ac")),r.a.createElement(k.b,{className:"link",to:"/products/".concat(e,"/").concat(t.id)},"See details")))})))))))};var j=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{className:"categories__item ".concat(e.categoryClassName),xs:12,md:5,item:!0},r.a.createElement(_.a,{variant:"h3",className:"home-page__title"},e.title),r.a.createElement(k.b,{to:e.link,className:"link"},e.linkName)))};var O=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"home-page"},r.a.createElement(_.a,{variant:"h1",className:"home-page__title"},e.title),r.a.createElement(_.a,{variant:"h2",className:"subtitle"},e.subtitle)),r.a.createElement("section",null,r.a.createElement(g.a,{container:!0,className:"categories"},r.a.createElement(j,{title:"Jackets",link:"products/jackets",linkName:"See jackets",categoryClassName:"categories__item--jackets"}),r.a.createElement(j,{title:"Coats",link:"products/coats",linkName:"See coats",categoryClassName:"categories__item--coats"}))))},S=a(54),x=a.n(S);var w=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"header__menu--left"},r.a.createElement("li",null,r.a.createElement(k.b,{to:"/",className:"header__shop-name"},e.shopName))),r.a.createElement("ul",{className:"header__menu--right"},r.a.createElement("li",null,r.a.createElement(k.b,{to:"/products/jackets",className:"header__links"},"jackets")),r.a.createElement("li",null,r.a.createElement(k.b,{to:"/products/coats",className:"header__links"},"coats")),r.a.createElement("li",null,r.a.createElement(k.b,{to:"/shopping-cart",className:"header__links"},r.a.createElement(x.a,null)))))))},z=a(105),C=a(56),I=a.n(C),F=a(55),q=a.n(F);var J=function(e){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,e.info),r.a.createElement("div",null,r.a.createElement(z.a,{href:"https://facebook.com",target:"_blank",rel:"noopener",variant:"body2"},r.a.createElement(q.a,null)),r.a.createElement(z.a,{href:"https://instagram.com",target:"_blank",rel:"noopener",variant:"body2"},r.a.createElement(I.a,null))))},P=a(107);var A=function(e){var t=Object(v.f)(),a=t.category,c=t.id,l=Object(v.e)(),i=h(a),o=i.data,m=i.error,u=i.loading,p=Object(n.useState)(null),d=Object(s.a)(p,2),f=d[0],E=d[1];if(m)throw m;if(u)return r.a.createElement(b.a,null);var k=o.filter((function(e){return e.id===parseInt(c)}))[0];return k?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{container:!0,className:"product"},r.a.createElement(g.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement("img",{className:"product__img",src:k.img,alt:k.img})),r.a.createElement(g.a,{item:!0,xs:12,sm:6,md:8},r.a.createElement("div",{className:"product__details"},r.a.createElement(_.a,{variant:"h1",className:"product__details--title"},k.name),r.a.createElement("p",{className:"product__details--description"},k.description),r.a.createElement("p",{className:"product__details--price"},"Price: ",k.price," \u20ac"),r.a.createElement("select",{id:"size",className:"product__details--size",value:f||"",onChange:function(e){return E(e.target.value)}},r.a.createElement("option",{value:"",defaultValue:!0},"Select size"),k.sizes.map((function(e){return r.a.createElement("option",{value:e.sku,key:e.sku},e.size," ")}))),r.a.createElement(P.a,{disabled:!f,className:"btn",onClick:function(){e.addToCart(a,c,f),l.push("/shopping-cart")}},"Add to cart"))))):r.a.createElement(N,{title:"Product not found"})};var B=a(57),Q=a.n(B),M=a(60),T=a(106),W=Object(M.a)({typography:{h1:{fontSize:40,fontWeight:400}}});var Y=function(e){var t=e.cart,a=e.updateQuantity,c=e.removeItem,l=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(null),i=Object(s.a)(l,2),o=i[0],m=i[1],u=Object(n.useState)(!0),p=Object(s.a)(u,2),d=p[0],f=p[1];return Object(n.useEffect)((function(){var t=e.map((function(e){return E.firestore().collection(e).get().then((function(e){return e.docs.map((function(e){return e.data()}))}))}));Promise.all(t).then((function(e){return c(e)})).catch((function(e){throw m(e),e})).finally((function(){return f(!1)}))}),[]),{data:r,error:o,loading:d}}(["jackets","coats"]),i=l.data,o=l.loading,m=l.error,u=t.reduce((function(e,t){return e+t.quantity}),0),p=Object(v.e)();if(m)throw m;return o?r.a.createElement(b.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{theme:W},r.a.createElement(_.a,{variant:"h1",className:"cart__title"},"Shopping Cart"),r.a.createElement("p",{className:"cart__item-quantity"},u>0?"You have ".concat(u," item").concat(u>1?"s":""," in your cart"):"Your cart is empty")),r.a.createElement("ul",null,t.map((function(e){var t=e.id,n=e.sku,l=e.quantity,o=i[0].concat(i[1]).find((function(e){return e.id===parseInt(t)})),s=o.price,m=o.name,u=o.sizes,p=o.img,d=u.find((function(e){return e.sku===parseInt(n)})).size,f=u.find((function(e){return e.availability})).availability;return r.a.createElement(g.a,{container:!0,key:n,className:"cart-item"},r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:2},r.a.createElement("img",{src:p,alt:m,className:"cart-item__img"})),r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:2},r.a.createElement(_.a,{variant:"h2",className:"cart-item__name"},m)),r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:2},r.a.createElement("p",{className:"cart-item__price"},s," \u20ac")),r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:2},r.a.createElement("p",{className:"cart-item__size"},"Size: ",d)),r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:2,className:"cart-item__actions"},r.a.createElement("select",{className:"cart-item__actions--change-quantity",value:l,onChange:function(e){return a(n,parseInt(e.target.value))}},Q.a.range(1,parseInt(f)+1,1).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{className:"cart-item__actions--remove",onClick:function(){c(n)}},"\u2715")))}))),r.a.createElement(g.a,{container:!0,justify:"flex-end",className:"cart__btn"},r.a.createElement(P.a,{disabled:0===u,className:"btn",onClick:function(){p.push("/checkout")}},"Go to checkout")))};var D=function(){return r.a.createElement("h1",null,"Checkout")},R=Object(M.a)({palette:{primary:{main:"#000"}},typography:{h2:{fontSize:22}},overrides:{MuiButton:{text:{background:"linear-gradient(to right, #2C5364, #203A43, #0F2027)",borderRadius:4,border:0,color:"white",height:48,padding:"0 30px"}}}});var U=function(){var e=Object(n.useState)((function(){try{var e;return null!==(e=JSON.parse(localStorage.getItem("cart")))&&void 0!==e?e:[]}catch(t){return console.log("Json parse error"),[]}})),t=Object(s.a)(e,2),a=t[0],c=t[1];function l(e,t,a){c((function(n){return n.find((function(e){return a===e.sku}))?n.map((function(e){return e.sku===a?Object(o.a)(Object(o.a)({},e),{},{quantity:e.quantity+1}):e})):[].concat(Object(i.a)(n),[{category:e,id:t,sku:a,quantity:1}])}))}function m(e,t){c((function(a){return a.map((function(a){return a.sku===e?Object(o.a)(Object(o.a)({},a),{},{quantity:t}):a}))}))}function u(e){c((function(t){return t.filter((function(t){return t.sku!==e}))}))}return Object(n.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(a))}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{theme:R},r.a.createElement(k.a,{basename:"/shop"},r.a.createElement(w,{shopName:"online shop"}),r.a.createElement("main",null,r.a.createElement(v.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(O,Object.assign({},e,{title:"Choose the perfect outfit.",subtitle:"Find the most fashionable clothes and accessories in online shop! New products every day. Choose a style and buy without leaving home!"}))}}),r.a.createElement(v.a,{path:"/products/:category",exact:!0,component:y}),r.a.createElement(v.a,{path:"/products/:category/:id",exact:!0,render:function(e){return r.a.createElement(A,Object.assign({},e,{addToCart:l}))}}),r.a.createElement(v.a,{path:"/shopping-cart",exact:!0,render:function(e){return r.a.createElement(Y,Object.assign({},e,{cart:a,updateQuantity:m,removeItem:u}))}}),r.a.createElement(v.a,{path:"/checkout",exact:!0,render:function(e){return r.a.createElement(D,Object.assign({},e,{cart:a}))}})),r.a.createElement(J,{info:"This page doesn't offer any real products."}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(58),Z=a(59),G=a(63),K=a(61),L=function(e){Object(G.a)(a,e);var t=Object(K.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(Z.a)(a,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.a.Component);l.a.render(r.a.createElement(L,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.26bfdc87.chunk.js.map